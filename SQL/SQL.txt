CREATE TABLE TechWorld
GO
USE TechWorld
GO

CREATE TABLE TaiKhoan(
	TaiKhoan NVARCHAR(50) NOT NULL,
	MatKhau NVARCHAR(50) NOT NULL,
	PRIMARY KEY (TaiKhoan)
);

CREATE TABLE NhaCungCap(
	MaNCC INT IDENTITY(1,1),
	TenNCC NVARCHAR(100) NOT NULL,
	SoDienThoaiNCC NVARCHAR(20) NOT NULL,
	DiaChiNCC NVARCHAR(200) NOT NULL,
	PRIMARY KEY (MaNCC)
);

CREATE TABLE LoaiHang(
	MaLoai INT IDENTITY(1,1) PRIMARY KEY,
	TenLoai NVARCHAR(100) NOT NULL,
);

CREATE TABLE SanPham(
	MaSP INT IDENTITY(1,1) PRIMARY KEY,
	TenSP NVARCHAR(100) NOT NULL,
	NgayNhap DATE NOT NULL,
	GiaTien FLOAT NOT NULL,
	GiaTienDaKhuyenMai [FLOAT] NOT NULL,
	SoLuong INT NOT NULL,
	MoTaSanPham NVARCHAR(MAX) NOT NULL,
	HinhAnh NVARCHAR(1000),
	MaLoai INT,
	MaNCC INT,
    FOREIGN KEY (MaLoai) REFERENCES LoaiHang(MaLoai),
    FOREIGN KEY (MaNCC) REFERENCES NhaCungCap(MaNCC)
);

CREATE TABLE KhachHang(
	MaKH INT IDENTITY(1,1) PRIMARY KEY,
	HoTen NVARCHAR(100) NOT NULL,
	Email NVARCHAR(100) NOT NULL,
	DiaChi NVARCHAR (200),
	SoDienThoai NVARCHAR(20),
	MatKhau NVARCHAR(20) NOT NULL,
);


CREATE TABLE DonHang(
	MaDH INT IDENTITY(1,1) PRIMARY KEY,
	MaKH INT,
	NgayDat DATETIME DEFAULT GETDATE(),
	TrangThai NVARCHAR(50),
	TongTien FLOAT NOT NULL,
	FOREIGN KEY (MaKH) REFERENCES KhachHang(MaKH)
);

CREATE TABLE ChiTietDonHang(
	MaDH INT,
	MaSP INT,
	SoLuong INT NOT NULL,
	GiaBan FLOAT NOT NULL,
	PRIMARY KEY (MaDH, MaSP),
	FOREIGN KEY (MaDH) REFERENCES DonHang(MaDH),
    FOREIGN KEY (MaSP) REFERENCES SanPham(MaSP)
);

CREATE TABLE YeuThich (
    MaKH INT,
    MaSP INT,
    NgayThemVao DATETIME DEFAULT GETDATE(),
    PRIMARY KEY (MaKH, MaSP),
    FOREIGN KEY (MaKH) REFERENCES KhachHang(MaKH),
    FOREIGN KEY (MaSP) REFERENCES SanPham(MaSP)
);

CREATE TABLE TinTuc (
    MaTin INT PRIMARY KEY IDENTITY(1,1),
    TieuDe NVARCHAR(255) NOT NULL,
    NoiDung NVARCHAR(MAX),
    NgayDang DATE DEFAULT CAST(GETDATE() AS DATE),
    TacGia NVARCHAR(100),
    HinhAnh NVARCHAR(255),
    TrangThai NVARCHAR(20) DEFAULT N'CÃ´ng khai'
);

